http://mbed.org/users/NickRyder/code/Pulse/#fb79a4637a64
